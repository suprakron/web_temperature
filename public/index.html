<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Temperature display website </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!--<link rel="stylesheet" type="text/css" href="/index.css">-->
    <style>
        body{
            background-color: #082a44;
            
        }
.chart {
  text-align: center;
  margin: auto;
}

.row {
  margin-bottom: 150px;
}

h1 {
  text-align: center;
  margin-bottom: 80px;
  color: #fbe675;
  
}


    </style>
   
  </head>
  <body>
    <h1>Temperature display website</h1>
    <div class="container">
        <div class="row">
            <div class="col-6 chart">
                <canvas id="myChart" width="1000" height="500"></canvas>
                <button type="button" class="btn btn-primary">ย้อนกลับ</button>
                <button type="button" class="btn btn-danger">ถัดไป</button>
            </div>
            
        </div>
        <div class="row">
            <div class="col-6 chart">
                <canvas id="myChart3" width="500" height="400"></canvas>
                <button type="button" class="btn btn-primary">ย้อนกลับ</button>
                <button type="button" class="btn btn-danger">ถัดไป</button>
            </div>
            <div class="col-6 chart">
                <canvas id="myChart4" width="500" height="400"></canvas>
                <button type="button" class="btn btn-primary">ย้อนกลับ</button>
                <button type="button" class="btn btn-danger">ถัดไป</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <!--<script src="/index.js"></script>-->  
    
    
    
    
    
<script>

let result = [];
let index = 0;
let index2 = 0;
let index3 = 0;

let d = 7208;
let h = 7208 * 4;
gendata()


function gendata(){
fetch('http://localhost:4000/temps')
    .then(function(response){
        return response.json()
    })

.then(function (data){
    console.log(data);
    result = data

    let count = index + 100
    let temp = []
    let date = []

    let temp2 = []
    let date2 = []

    let temp3 = []
    let date3 = []

    for(index; index < count; index++){
        if(index === result.length){break;}
        temp.push(result[index].temp);
        data.push(result[index].date);
    }

    for(index2; index2 < count; index2++){
        if (index2 * d >= result.length){break;}
        temp2.push(result[index2 * d].temp);
        date2.push(result[index2 * d].date);

    }

    for(index3; index3 < count; index3++){
        if (index3 * d >= result.length){break;}
        temp3.push(result[index3 * d].temp);
        date3.push(result[index3 * d].date);

    }



let labels1 = ['00.00', '00.15','00.30','00.45','01.00','01.15','01.30','01.45','02.00','02.15','02.30','02.45','03.00','03.15','03.30','03.45','04.00','04.15','04.30','04.45','05.00'];
let data1 =  [83, 67, 66, 61, 47, 187,200,250,300,187,200,250,300];
let d1 = temp;
let colors1 = ['#49A9EA', '#36CAAB','#36CAAB','#36CAAB'];

let myDoughnutChart = document.getElementById("myChart").getContext('2d');

let chart1 = new Chart(myDoughnutChart, {
    type: 'line',
    data: {
        labels: ['00.00', '00.15','00.30','00.45','01.00','01.15','01.30','01.45','02.00','02.15','02.30','02.45','03.00','03.15','03.30','03.45','04.00','04.15','04.30','04.45','05.00'],
        datasets: [ {
           
            backgroundColor: ['#49A9EA', '#36CAAB','#49A9EA', '#36CAAB','#36CAAB','#36CAAB'],
            data: d1
        }]
    },
    options: {
        title: {
            text: "Realtime",
            display: true
        },
         series: [{
            name: 'sales',
            data:  date
          }],
    }
});

let labels3 = ['Monday', 'Tuesday', 'Wednesday', 'Thrusday', 'Friday','Sunday','Saturday'];
let myChart3 = document.getElementById("myChart3").getContext('2d');

let chart3 = new Chart(myChart3, {
    type: 'line',
    data: {
        labels: labels3,
        datasets: [
         // {
          //  label: 'Messi',
           // fill: true,
           // backgroundColor: "rgba(179, 181, 198, 0.2)",
           // borderColor: "rgba(179, 181, 198, 1)",
          //  pointBorderColor: "#fff",
          //  pointBackgroundColor: "rgba(179, 181, 198, 1)",
           // data: [50, 12, 55, 7, 29]
         // },
          {
            label: 'Ronaldo',
            fill: true,
            backgroundColor: "rgba(255, 99, 132, 0.2)",
            borderColor: "rgba(255, 99, 132, 1)",
            pointBorderColor: "#fff",
            pointBackgroundColor: "rgba(255, 99, 132, 1)",
            data:  date2
          }
        ]
    },
    options: {
        title: {
            text: "weekly",
            display: true
        }
    }
});


let labels4 = ['Week1', 'Week2', 'Week3', 'Week4' ];
let data4 = [83, 67, 66, 61, 47, 187];
let colors4 = ['#49A9EA', '#36CAAB', '#34495E', '#B370CF', '#AC5353', '#CFD4D8'];

let myChart4 = document.getElementById("myChart4").getContext('2d');

let chart4 = new Chart(myChart4, {
    type: 'line',
    data: {
        labels: date3,
        datasets: [ {
            data: date3,
            backgroundColor: colors4
        }]
    },
    options: {
        title: {
            text: "Monthly",
            display: true
        }
    }
   });


      });


    }

    </script>
  </body>
</html>
 

 
 
 
